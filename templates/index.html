<!-- <!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Placement Package Predictor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div class="container d-flex align-items-center justify-content-center min-vh-100">
    <div class="card shadow-lg p-4" style="width: 100%; max-width: 500px;">
        <h2 class="text-center mb-3 gradient-text">Placement Package Predictor</h2>
        <p class="text-muted text-center">Enter your CGPA and get an instant package prediction.</p>

        <div class="mb-3">
            <label for="cgpaInput" class="form-label">CGPA</label>
            <input type="number" step="0.01" min="0" max="10" class="form-control" id="cgpaInput" placeholder="e.g. 7.65">
        </div>
        <button class="btn btn-primary w-100" onclick="predict()">Predict Package</button>

        <div id="result" class="mt-4 text-center"></div>

        <canvas id="scatterChart" class="mt-4"></canvas>
    </div>
</div>

<script>
    const cgpaList  = {{ cgpa_list | tojson }};
    const pkgList   = {{ package_list | tojson }};

    const ctx = document.getElementById('scatterChart').getContext('2d');
    new Chart(ctx, {
        type: 'scatter',
        data: {
            datasets: [{
                label: 'Historical Data',
                data: cgpaList.map((v, i) => ({x: v, y: pkgList[i]})),
                backgroundColor: 'rgba(99, 102, 241, 0.8)',
                pointRadius: 5
            }]
        },
        options: {
            responsive: true,
            plugins: {legend: {display: false}},
            scales: {
                x: {title: {display: true, text: 'CGPA'}},
                y: {title: {display: true, text: 'Package (LPA)'}}
            }
        }
    });

    async function predict() {
        const cgpa = parseFloat(document.getElementById('cgpaInput').value);
        if (isNaN(cgpa)) return alert('Enter a valid CGPA');

        const res = await fetch('/predict', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({cgpa})
        });
        const data = await res.json();
        document.getElementById('result').innerHTML =
            `<div class="alert alert-success mt-3">
                Predicted Package: <strong>${data.package} LPA</strong>
             </div>`;
    }
</script>
</body>
</html> -->

<!-- seconed version -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Placement Package Predictor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body class="d-flex flex-column min-vh-100">
    <!-- ===== HERO / CALCULATOR SECTION ===== -->
    <section class="hero flex-grow-1 d-flex align-items-center">
      <div class="container text-center text-white">
        <!-- replace only the h1 + p -->
        <div class="hero-text-box">
          <h1 class="display-4 fw-bold mb-3">
            <span id="typeWriter"></span><span class="cursor">|</span>
          </h1>
          <p class="lead mb-4 punch-line">
            Drop your CGPA & watch the ðŸ’° rain!
          </p>
        </div>

        <div class="calculator-wrapper mx-auto">
          <input
            id="cgpaInput"
            type="number"
            step="0.01"
            min="0"
            max="10"
            class="form-control form-control-lg mb-3"
            placeholder="e.g. 8.23"
          />
          <button class="btn btn-light btn-lg w-100 mb-3" onclick="predict()">
            Predict Package
          </button>
          <div id="result" class="fade-in"></div>
        </div>
      </div>
    </section>

    <!-- ===== CHART SECTION ===== -->
    <section class="chart-section py-5">
      <div class="container">
        <h2 class="text-center mb-4">Historical Trend</h2>
        <div class="chart-box mx-auto">
          <canvas id="scatterChart"></canvas>
        </div>
      </div>
    </section>

    <!-- ===== FOOTER ===== -->
    <footer class="bg-dark text-white py-3 mt-auto">
      <div class="container text-center small">
        &copy; <span id="year"></span> Placement Package Predictor &nbsp;â€¢&nbsp;
        <a href="#" class="text-white-50">Privacy</a>
        &nbsp;â€¢&nbsp;
        <a href="#" class="text-white-50">Terms</a>
      </div>
    </footer>

    <script>
          /* ---- scatter plot ---- */
          const cgpaList = {{ cgpa_list | tojson }};
          const pkgList  = {{ package_list | tojson }};

          const ctx = document.getElementById('scatterChart');
          new Chart(ctx, {
              type: 'scatter',
              data: {
                  datasets: [{
                      label: 'Past Recruits',
                      data: cgpaList.map((v, i) => ({x: v, y: pkgList[i]})),
                      backgroundColor: 'rgba(255, 255, 255, 0.7)',
                      pointRadius: 5
                  }]
              },
              options: {
                  responsive: true,
                  maintainAspectRatio: false,
                  plugins: {legend: {display: false}},
                  scales: {
                      x: {title: {display: true, text: 'CGPA', color: '#fff'}, ticks: {color: '#fff'}, grid: {color: 'rgba(255,255,255,0.1)'}},
                      y: {title: {display: true, text: 'Package (LPA)', color: '#fff'}, ticks: {color: '#fff'}, grid: {color: 'rgba(255,255,255,0.1)'}}
                  }
              }
          });

          /* ---- prediction ---- */
          async function predict() {
              const cgpa = parseFloat(document.getElementById('cgpaInput').value);
              if (isNaN(cgpa)) return alert('Enter a valid CGPA');

              const res = await fetch('/predict', {
                  method : 'POST',
                  headers: {'Content-Type': 'application/json'},
                  body   : JSON.stringify({cgpa})
              });
              const data = await res.json();
              const html = `
                <div class="alert alert-light py-3">
                    <div class="h5 mb-0">Predicted Package</div>
                    <div class="display-6 fw-bold">${data.package} LPA</div>
                </div>`;
              document.getElementById('result').innerHTML = html;
          }

          document.getElementById('year').textContent = new Date().getFullYear();


          /* ===== type-writer ===== */
      const phrases = [
        "Know Your Worth...",
        "Unleash the Package!",
        "Turn Grades into Riches ðŸ’¸",
        "CGPA â†’ Cash Converter ðŸš€"
      ];
      let i = 0, j = 0, current = '', deleting = false;

      function type() {
        const tw = document.getElementById('typeWriter');
        current = phrases[i];
        if (deleting) { tw.textContent = current.substring(0, j--); }
        else          { tw.textContent = current.substring(0, j++); }

        if (!deleting && j === current.length + 1) { deleting = true; setTimeout(type, 1500); }
        else if (deleting && j === 0) { deleting = false; i = (i + 1) % phrases.length; setTimeout(type, 300); }
        else { setTimeout(type, deleting ? 50 : 90); }
      }
      type();

      /* ===== confetti burst ===== */
      function burst() {
        const colors = ['#f44336','#e91e63','#9c27b0','#673ab7','#3f51b5','#00bcd4','#4caf50','#ffeb3b','#ff9800'];
        for (let k = 0; k < 60; k++) {
          const c = document.createElement('div');
          c.className = 'confetti';
          c.style.left = Math.random() * 100 + '%';
          c.style.background = colors[Math.floor(Math.random()*colors.length)];
          c.style.animationDelay = Math.random() * 0.4 + 's';
          document.body.appendChild(c);
          setTimeout(() => c.remove(), 3000);
        }
      }
      /* trigger on every prediction */
      const oldPredict = window.predict;
      window.predict = async function() {
        await oldPredict();
        burst();
      };
    </script>
  </body>
</html>
